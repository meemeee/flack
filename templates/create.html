{% extends "layout.html" %}

{% block tittle %}
New channel
{% endblock %}

{% block main %}
<div class="row justify-content-center p-5">
    <div class="col-lg-8">
        <h2>Let's get creative!</h2>
        <form id="form" action="{{ url_for('new_channel', user=user) }}" method="post">
            <div class="form-group bd-highlight">
                <div class="mt-3 py-2 flex-grow-1 bd-highlight">
                    <input autofocus autocomplete="off" class="form-control rounded-pill" id="channel_name" name="channel_name" 
                        placeholder="Channel name" type="text">
                </div>

                <div class="mb-3 py-2 flex-grow-1 bd-highlight">
                    <input autofocus autocomplete="off" class="form-control rounded-pill" id="channel_desc" name="channel_desc" 
                        placeholder="Channel description (optional)" type="text">
                </div>
                <div class="py-2 bd-highlight">
                    <button id="new_channel" class="btn btn-primary rounded-pill" type="submit">
                        Create and Go
                    </button>   
                </div>
            </div>
        </form>
    </div>

    <div class="col-lg-6">
        <img src="../static/media/5.jpg" alt="" class="img-fluid  ">
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelector('#form').onsubmit = event => {
            event.preventDefault();
            if (document.querySelector('#channel_name').value.length === 0) {
                alert("You must provide channel name.");
            }
            else if (document.querySelector('#channel_name').value.length > 25) {
                alert("Channel name must not exceed 25 characters.");
            }
            else {
                document.querySelector('#form').submit();
            }
        };
    });

    // Clear previous lastChannel value
    window.addEventListener('unload', event => {
        localStorage.removeItem('last_channel')
    });
    
</script>
{% endblock %}